{% extends 'memoria/dashboard_base.html' %} 
{% load mathfilters %}
{% load humanize %}
{% load crispy_forms_tags %}
{% block content %}
<style>
    .abs-center {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 40vh;
      }
      
    .mi_input{
        border:1px solid #red;
    }

</style>

<div class="container">


    <h2>Seleccione Suscripcion</h2>
    <form method="post">
      {% csrf_token %}
      {% crispy form %}
    </form>


<hr>
    <h2>Esta es la suscripcion seleccionada.</h2>


    {% if planes_asociados %}
    <ul>
      {% for suscripcion in planes_asociados %}
        <li>
          Plan: {{ suscripcion.id_plan.nombre }} - Estado: {{ suscripcion.estado }}
        </li>
        <li>
          Descripción: {{ suscripcion.id_plan.descripcion|safe }}
        </li> 
        <li>
          Capacidad para {{ suscripcion.id_plan.cantidad }} familiares
        </li> 
        <li>
          Valor: {{ suscripcion.id_plan.valor_factor|mul:uf }}
        </li>                 
        <li>
          Estado: {{ suscripcion.estado }}{{ uf }}
        </li>
        
        {% if suscripcion.estado == 0 %}
        <li>
          <form action="" method="POST">
            {% csrf_token %}
            <input type="hidden" name="suscripcion_id" value="{{ suscripcion.id }}">
            <button type="submit" class="btn btn-primary">Pagar suscripción</button>
          </form>
        </li>
      {% else %}
        <li>
          Estado: {{ suscripcion.estado }}{{ uf }}
        </li>                
      {% endif %}        
        
      {% endfor %}
    </ul>
  {% else %}
    <p>No tienes suscripciones.</p>
  {% endif %}
</div>

{% if error %}
    <p>{{ error }}</p>
{% endif %}

{% endblock %}